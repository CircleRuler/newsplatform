[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nSession = Package.session.Session;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nmeteorInstall = Package.modules.meteorInstall;\nBuffer = Package.modules.Buffer;\nprocess = Package.modules.process;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nAccounts = Package['accounts-base'].Accounts;\nShowdown = Package.markdown.Showdown;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"client\":{\"template.client.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                     //\n// client/template.client.js                                                                           //\n//                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                       //\n                                                                                                       // 1\nTemplate.body.addContent((function() {                                                                 // 2\n  var view = this;                                                                                     // 3\n  return [ Spacebars.include(view.lookupTemplate(\"nav\")), \"\\n    \", Spacebars.include(view.lookupTemplate(\"container\")), \"\\n    \", Spacebars.include(view.lookupTemplate(\"footer\")) ];\n}));                                                                                                   // 5\nMeteor.startup(Template.body.renderToDocument);                                                        // 6\n                                                                                                       // 7\nTemplate.__checkName(\"nav\");                                                                           // 8\nTemplate[\"nav\"] = new Template(\"Template.nav\", (function() {                                           // 9\n  var view = this;                                                                                     // 10\n  return HTML.DIV({                                                                                    // 11\n    \"class\": \"navbar navbar-inverse navbar-fixed-top\"                                                  // 12\n  }, \"\\n        \", HTML.DIV({                                                                          // 13\n    \"class\": \"navbar-inner\"                                                                            // 14\n  }, \"\\n            \", HTML.DIV({                                                                      // 15\n    \"class\": \"container\"                                                                               // 16\n  }, \"\\n                \", HTML.Raw('<a href=\"\" class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".nav-collapse\">\\n                    <span class=\"icon-bar\"></span>\\n                    <span class=\"icon-bar\"></span>\\n                    <span class=\"icon-bar\"></span>\\n                </a>'), \"\\n                \", HTML.Raw('<a href=\"/\" class=\"brand\">新闻爆料</a>'), \"\\n                \", HTML.DIV({\n    \"class\": \"nav-collapse\"                                                                            // 18\n  }, \"\\n                    \", HTML.UL({                                                               // 19\n    \"class\": \"nav\"                                                                                     // 20\n  }, \"\\n                        \", HTML.LI({                                                           // 21\n    \"class\": function() {                                                                              // 22\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"active\"), \"index\"));                        // 23\n    }                                                                                                  // 24\n  }, HTML.Raw('<a href=\"/\">首页</a>')), \"\\n                        \", Blaze.If(function() {              // 25\n    return Spacebars.call(view.lookup(\"currentUser\"));                                                 // 26\n  }, function() {                                                                                      // 27\n    return [ \"\\n                            \", HTML.LI(HTML.A({                                        // 28\n      href: \"/logout\"                                                                                  // 29\n    }, \"登出\")), \"\\n                        \" ];                                                         // 30\n  }, function() {                                                                                      // 31\n    return [ \"\\n                            \", HTML.LI({                                               // 32\n      \"class\": function() {                                                                            // 33\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"active\"), \"login\"));                      // 34\n      }                                                                                                // 35\n    }, HTML.A({                                                                                        // 36\n      href: \"/login\"                                                                                   // 37\n    }, \"登入\")), \"\\n                            \", HTML.LI({                                             // 38\n      \"class\": function() {                                                                            // 39\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"active\"), \"reg\"));                        // 40\n      }                                                                                                // 41\n    }, HTML.A({                                                                                        // 42\n      href: \"/reg\"                                                                                     // 43\n    }, \"注册\")), \"\\n                        \" ];                                                         // 44\n  }), \"\\n                    \"), \"\\n                \"), \"\\n            \"), \"\\n        \"), \"\\n    \");   // 45\n}));                                                                                                   // 46\n                                                                                                       // 47\nTemplate.__checkName(\"container\");                                                                     // 48\nTemplate[\"container\"] = new Template(\"Template.container\", (function() {                               // 49\n  var view = this;                                                                                     // 50\n  return HTML.DIV({                                                                                    // 51\n    id: \"container\",                                                                                   // 52\n    \"class\": \"container\"                                                                               // 53\n  }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"info\")), \"\\n        \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"currentUrl\"), \"index\"));                          // 55\n  }, function() {                                                                                      // 56\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"index\")), \"\\n        \" ];        // 57\n  }), \"\\n        \", Blaze.If(function() {                                                              // 58\n    return Spacebars.call(Spacebars.dot(view.lookup(\"currentUrl\"), \"login\"));                          // 59\n  }, function() {                                                                                      // 60\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"login\")), \"\\n        \" ];        // 61\n  }), \"\\n        \", Blaze.If(function() {                                                              // 62\n    return Spacebars.call(Spacebars.dot(view.lookup(\"currentUrl\"), \"reg\"));                            // 63\n  }, function() {                                                                                      // 64\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"reg\")), \"\\n        \" ];          // 65\n  }), \"\\n    \");                                                                                       // 66\n}));                                                                                                   // 67\n                                                                                                       // 68\nTemplate.__checkName(\"footer\");                                                                        // 69\nTemplate[\"footer\"] = new Template(\"Template.footer\", (function() {                                     // 70\n  var view = this;                                                                                     // 71\n  return HTML.Raw('<p class=\"muted text-center\">newsplatform 2016</p>');                               // 72\n}));                                                                                                   // 73\n                                                                                                       // 74\nTemplate.__checkName(\"info\");                                                                          // 75\nTemplate[\"info\"] = new Template(\"Template.info\", (function() {                                         // 76\n  var view = this;                                                                                     // 77\n  return [ Blaze.If(function() {                                                                       // 78\n    return Spacebars.call(Spacebars.dot(view.lookup(\"info\"), \"success\"));                              // 79\n  }, function() {                                                                                      // 80\n    return [ \"\\n        \", HTML.DIV({                                                                  // 81\n      \"class\": \"alert alert-success\"                                                                   // 82\n    }, Blaze.View(\"lookup:info.success\", function() {                                                  // 83\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"info\"), \"success\"));                        // 84\n    })), \"\\n    \" ];                                                                                   // 85\n  }), \"\\n    \", Blaze.If(function() {                                                                  // 86\n    return Spacebars.call(Spacebars.dot(view.lookup(\"info\"), \"error\"));                                // 87\n  }, function() {                                                                                      // 88\n    return [ \"\\n        \", HTML.DIV({                                                                  // 89\n      \"class\": \"alert alert-error\"                                                                     // 90\n    }, Blaze.View(\"lookup:info.error\", function() {                                                    // 91\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"info\"), \"error\"));                          // 92\n    })), \"\\n    \" ];                                                                                   // 93\n  }) ];                                                                                                // 94\n}));                                                                                                   // 95\n                                                                                                       // 96\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.index.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                     //\n// client/template.index.js                                                                            //\n//                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                       //\n                                                                                                       // 1\nTemplate.__checkName(\"index\");                                                                         // 2\nTemplate[\"index\"] = new Template(\"Template.index\", (function() {                                       // 3\n  var view = this;                                                                                     // 4\n  return HTML.Raw('<div class=\"hero-unit\">\\n        <h1>欢迎来到 newsplatform 新闻爆料平台</h1>\\n        <p>newsplatform 是一个基于meteor的毕业设计项目</p>\\n        <p>\\n            <a href=\"/login\" class=\"btn btn-primary btn-large\">登陆</a>\\n            <a href=\"/reg\" class=\"btn btn-large\">立即注册</a>\\n        </p>\\n    </div>\\n    <div class=\"row\">\\n        <div class=\"span4\">\\n            <h2>在很久很久以前</h2>\\n            <p>有一个无故事王国，那里住着许多无故事的居民。</p>\\n        </div>\\n        <div class=\"span4\">\\n            <h2>语录</h2>\\n            <p>毁灭人类的从来不是无知而是傲慢。<br>\\n            毁灭你，与你何干？<br>\\n            那天清晨落叶满地，树林里分出两条路，而我选择了人迹罕至的一条，从此决定了我一生的道路<br>\\n            你们是虫子！<br>\\n            一切终将逝去，只有死神永生！<br>\\n            没有甲铁城看的大家不是只有去死了吗！<br>\\n            出师未捷身先死，妮可妮可妮可妮！</p>\\n        </div>\\n        <div class=\"span4\">\\n            <h3>一段话</h3>\\n            <p>“不论你是谁，不论你做什么，当你渴望得到某种东西时，最终一定能够得到，因为这愿望来自宇宙的灵魂。” “当你想要某种东西时，整个宇宙会合力助你实现愿望。” “人们很早就学会了生活的道理，也许正因为如此，他们才会早早就放弃了它们。世界就是如此。” 实际上，每天都一成不变，是因为人们已经失去了对美好事物的敏锐感觉。然而，只要有明媚的阳光，人们的生活中就会出现美好的事物。 “事情往往如此。...</p>\\n        </div>\\n    </div>');\n}));                                                                                                   // 6\n                                                                                                       // 7\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.login.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                     //\n// client/template.login.js                                                                            //\n//                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                       //\n                                                                                                       // 1\nTemplate.__checkName(\"login\");                                                                         // 2\nTemplate[\"login\"] = new Template(\"Template.login\", (function() {                                       // 3\n  var view = this;                                                                                     // 4\n  return HTML.Raw('<form action=\"\" class=\"form-horizontal\">\\n        <fieldset>\\n            <legend>用户登入</legend>\\n            <div class=\"control-group\">\\n                <label for=\"username\" class=\"control-label\">用户名</label>\\n                <div class=\"controls\">\\n                    <input type=\"text\" id=\"username\" class=\"input-xlarge\" name=\"username\">\\n                </div>\\n            </div>\\n            <div class=\"control-group\">\\n                <label for=\"password\" class=\"control-label\">密码</label>\\n                <div class=\"controls\">\\n                    <input type=\"password\" name=\"password\" class=\"input-xlarge\" id=\"password\">\\n                </div>\\n            </div>\\n            <div class=\"form-actions\">\\n                <button id=\"submit\" class=\"btn btn-primary\">登入</button>\\n            </div>\\n        </fieldset>\\n    </form>');\n}));                                                                                                   // 6\n                                                                                                       // 7\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.reg.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                     //\n// client/template.reg.js                                                                              //\n//                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                       //\n                                                                                                       // 1\nTemplate.__checkName(\"reg\");                                                                           // 2\nTemplate[\"reg\"] = new Template(\"Template.reg\", (function() {                                           // 3\n  var view = this;                                                                                     // 4\n  return HTML.FORM({                                                                                   // 5\n    action: \"\",                                                                                        // 6\n    \"class\": \"form-horizontal\"                                                                         // 7\n  }, \"\\n        \", HTML.FIELDSET(\"\\n            \", HTML.getTag(\"lengend\")(\"用户注册\"), \"\\n            \", HTML.Raw('<div class=\"control-group\">\\n                <label for=\"username\" class=\"control-label\">用户名</label>\\n                <div class=\"controls\">\\n                    <input type=\"text\" id=\"username\" class=\"input-xlarge\" name=\"username\">\\n                </div>\\n            </div>'), \"\\n            \", HTML.Raw('<div class=\"control-group\">\\n                <label for=\"useremail\" class=\"control-label\">邮箱</label>\\n                <div class=\"controls\">\\n                    <input type=\"text\" id=\"useremail\" class=\"input-xlarge\" name=\"useremail\">\\n                </div>\\n            </div>'), \"\\n            \", HTML.Raw('<div class=\"control-group\">\\n                <label for=\"password\" class=\"control-label\">密码</label>\\n                <div class=\"controls\">\\n                    <input type=\"password\" class=\"input-xlarge\" id=\"password\" name=\"password\">\\n                </div>\\n            </div>'), \"\\n            \", HTML.Raw('<div class=\"control-group\">\\n                <label for=\"password-repeat\" class=\"control-label\">重复输入密码</label>\\n                <div class=\"controls\">\\n                    <input type=\"password\" name=\"password-repeat\" class=\"input-xlarge\" id=\"password-repeat\">\\n                </div>\\n            </div>'), \"\\n            \", HTML.Raw('<div class=\"form-actions\">\\n                <button id=\"submit\" class=\"btn btn-primary\">注册</button>\\n            </div>'), \"\\n        \"), \"\\n    \");\n}));                                                                                                   // 9\n                                                                                                       // 10\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"client.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                     //\n// client/client.js                                                                                    //\n//                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                       //\nSession.setDefault(\"currentUrl\", { index: \"active\", login: \"\", reg: \"\" });                             // 1\nSession.setDefault(\"info\", { success: \"\", error: \"\" });                                                // 2\n                                                                                                       //\nTemplate.info.info = function () {                                                                     // 4\n    return Session.get(\"info\");                                                                        // 5\n};                                                                                                     //\n                                                                                                       //\nTemplate.container.currentUrl = function () {                                                          // 8\n    return Session.get(\"currentUrl\");                                                                  // 9\n};                                                                                                     //\n                                                                                                       //\nvar urlRouter = Backbone.Router.extend({                                                               // 12\n    routes: {                                                                                          // 13\n        \"\": \"index\",                                                                                   // 14\n        \"login\": \"login\",                                                                              // 15\n        \"reg\": \"reg\",                                                                                  // 16\n        \"logout\": \"logout\"                                                                             // 17\n    },                                                                                                 //\n    index: function () {                                                                               // 19\n        function index() {                                                                             // 19\n            Session.set(\"currentUrl\", { index: \"active\", login: \"\", reg: \"\" });                        // 20\n        }                                                                                              //\n                                                                                                       //\n        return index;                                                                                  //\n    }(),                                                                                               //\n    login: function () {                                                                               // 22\n        function login() {                                                                             // 22\n            if (Meteor.userId()) {                                                                     // 23\n                this.navigate(\"/\", true);                                                              // 24\n                Session.set(\"info\", { success: \"\", error: \"用户已在线！\" });                                 // 25\n            }                                                                                          //\n            Session.set(\"currentUrl\", { index: \"\", login: \"active\", reg: \"\" });                        // 27\n        }                                                                                              //\n                                                                                                       //\n        return login;                                                                                  //\n    }(),                                                                                               //\n    reg: function () {                                                                                 // 29\n        function reg() {                                                                               // 29\n            if (Meteor.userId()) {                                                                     // 30\n                this.navigate(\"/\", true);                                                              // 31\n                Session.set(\"info\", { success: \"\", error: \"用户已在线！\" });                                 // 32\n            }                                                                                          //\n            Session.set(\"currentUrl\", { index: \"\", login: \"\", reg: \"active\" });                        // 34\n        }                                                                                              //\n                                                                                                       //\n        return reg;                                                                                    //\n    }(),                                                                                               //\n    logout: function () {                                                                              // 36\n        function logout() {                                                                            // 36\n            if (Meteor.userId()) {                                                                     // 37\n                Meteor.logout();                                                                       // 38\n                this.navigate(\"/\", true);                                                              // 39\n                Session.set(\"info\", { success: \"登出成功\", error: \"\" });                                   // 40\n            } else {                                                                                   //\n                this.navigate(\"/\", true);                                                              // 42\n                Session.set(\"info\", { success: \"\", error: \"用户不在线！\" });                                 // 43\n            }                                                                                          //\n        }                                                                                              //\n                                                                                                       //\n        return logout;                                                                                 //\n    }(),                                                                                               //\n    redirect: function () {                                                                            // 46\n        function redirect(url) {                                                                       // 46\n            this.navigate(url, true);                                                                  // 47\n        }                                                                                              //\n                                                                                                       //\n        return redirect;                                                                               //\n    }()                                                                                                //\n});                                                                                                    //\nRouter = new urlRouter();                                                                              // 50\n                                                                                                       //\nMeteor.startup(function () {                                                                           // 52\n    Backbone.history.start({ pushState: true });                                                       // 53\n});                                                                                                    //\n                                                                                                       //\nTemplate.nav.active = function () {                                                                    // 56\n    return Session.get(\"currentUrl\");                                                                  // 57\n};                                                                                                     //\n                                                                                                       //\nTemplate.reg.events({                                                                                  // 60\n    'click #submit': function () {                                                                     // 61\n        function clickSubmit(event) {                                                                  // 61\n            event.preventDefault();                                                                    // 62\n            var $username = $(\"#username\").val();                                                      // 63\n            var $password = $(\"#password\").val();                                                      // 64\n            var $useremail = $(\"#useremail\").val();                                                    // 65\n            var $password_repeat = $(\"#password-repeat\").val();                                        // 66\n            if ($password.length === 0 || $username.length === 0) {                                    // 67\n                Session.set(\"info\", { success: \"\", error: \"用户名或者密码不能为空\" });                            // 68\n                return;                                                                                // 69\n            }                                                                                          //\n            if ($password !== $password_repeat) {                                                      // 71\n                Session.set(\"info\", { success: \"\", error: \"两次输入密码不一致\" });                              // 72\n                return;                                                                                // 73\n            }                                                                                          //\n            Accounts.createUser({                                                                      // 75\n                username: $username,                                                                   // 76\n                password: $password,                                                                   // 77\n                email: $useremail }, function (err) {                                                  // 78\n                if (err) {                                                                             // 80\n                    Session.set(\"info\", { success: \"\", error: err.reason });                           // 81\n                } else {                                                                               //\n                    Session.set(\"info\", { success: \"注册成功\", error: \"\" });                               // 83\n                }                                                                                      //\n            });                                                                                        //\n        }                                                                                              //\n                                                                                                       //\n        return clickSubmit;                                                                            //\n    }()                                                                                                //\n});                                                                                                    //\n                                                                                                       //\nTemplate.login.events({                                                                                // 89\n    'click #submit': function () {                                                                     // 90\n        function clickSubmit(event) {                                                                  // 90\n            event.preventDefault();                                                                    // 91\n            var $username = $(\"#username\").val();                                                      // 92\n            var $password = $(\"#password\").val();                                                      // 93\n            if ($password.length === 0 || $username.length === 0) {                                    // 94\n                Session.set(\"info\", { success: \"\", error: \"用户名或密码不能为空\" });                             // 95\n                return;                                                                                // 96\n            }                                                                                          //\n            Meteor.loginWithPassword($username, $password, function (err) {                            // 98\n                if (err) {                                                                             // 99\n                    Session.set(\"info\", { success: \"\", error: \"登陆失败！！！\" });                            // 100\n                } else {                                                                               //\n                    Router.redirect(\"/\");                                                              // 102\n                    Session.set(\"info\", { success: \"登陆成功\", error: \"\" });                               // 103\n                }                                                                                      //\n            });                                                                                        //\n        }                                                                                              //\n                                                                                                       //\n        return clickSubmit;                                                                            //\n    }()                                                                                                //\n});                                                                                                    //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\"extensions\":[\".js\",\".json\",\".html\"]});\nrequire(\"./client/template.client.js\");\nrequire(\"./client/template.index.js\");\nrequire(\"./client/template.login.js\");\nrequire(\"./client/template.reg.js\");\nrequire(\"./client/client.js\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["/client/template.client.js","/client/template.index.js","/client/template.login.js","/client/template.reg.js","/client/client.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4G;;;;;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA,2G;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA,2G;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4G;;;;;;;;;;;ACTA,QAAQ,UAAR,CAAmB,YAAnB,EAAiC,EAAC,OAAO,QAAP,EAAiB,OAAO,EAAP,EAAW,KAAK,EAAL,EAA9D;AACA,QAAQ,UAAR,CAAmB,MAAnB,EAA2B,EAAC,SAAQ,EAAR,EAAW,OAAM,EAAN,EAAvC;;AAEA,SAAS,IAAT,CAAc,IAAd,GAAqB,YAAY;AAC7B,WAAO,QAAQ,GAAR,CAAY,MAAZ,CAAP,CAD6B;CAAZ;;AAIrB,SAAS,SAAT,CAAmB,UAAnB,GAAgC,YAAW;AACvC,WAAO,QAAQ,GAAR,CAAY,YAAZ,CAAP,CADuC;CAAX;;AAIhC,IAAI,YAAY,SAAS,MAAT,CAAgB,MAAhB,CAAuB;AACnC,YAAQ;AACJ,YAAI,OAAJ;AACA,iBAAS,OAAT;AACA,eAAO,KAAP;AACA,kBAAU,QAAV;KAJJ;AAMA;AAAO,yBAAY;AACf,oBAAQ,GAAR,CAAY,YAAZ,EAA0B,EAAC,OAAO,QAAP,EAAiB,OAAO,EAAP,EAAW,KAAK,EAAL,EAAvD,EADe;SAAZ;;;OAAP;AAGA;AAAO,yBAAY;AACf,gBAAG,OAAO,MAAP,EAAH,EAAmB;AACf,qBAAK,QAAL,CAAc,GAAd,EAAkB,IAAlB,EADe;AAEf,wBAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAQ,EAAR,EAAY,OAAO,QAAP,EAAjC,EAFe;aAAnB;AAIA,oBAAQ,GAAR,CAAY,YAAZ,EAA0B,EAAC,OAAO,EAAP,EAAW,OAAM,QAAN,EAAgB,KAAK,EAAL,EAAtD,EALe;SAAZ;;;OAAP;AAOA;AAAK,uBAAY;AACb,gBAAG,OAAO,MAAP,EAAH,EAAmB;AACf,qBAAK,QAAL,CAAc,GAAd,EAAkB,IAAlB,EADe;AAEf,wBAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAQ,EAAR,EAAY,OAAO,QAAP,EAAjC,EAFe;aAAnB;AAIA,oBAAQ,GAAR,CAAY,YAAZ,EAA0B,EAAC,OAAO,EAAP,EAAW,OAAO,EAAP,EAAW,KAAK,QAAL,EAAjD,EALa;SAAZ;;;OAAL;AAOA;AAAQ,0BAAY;AAChB,gBAAG,OAAO,MAAP,EAAH,EAAmB;AACf,uBAAO,MAAP,GADe;AAEf,qBAAK,QAAL,CAAc,GAAd,EAAkB,IAAlB,EAFe;AAGf,wBAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAQ,MAAR,EAAgB,OAAO,EAAP,EAArC,EAHe;aAAnB,MAIK;AACD,qBAAK,QAAL,CAAc,GAAd,EAAkB,IAAlB,EADC;AAED,wBAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAQ,EAAR,EAAY,OAAO,QAAP,EAAjC,EAFC;aAJL;SADI;;;OAAR;AAUA;AAAU,0BAAS,GAAT,EAAa;AACnB,iBAAK,QAAL,CAAc,GAAd,EAAmB,IAAnB,EADmB;SAAb;;;OAAV;CAlCY,CAAZ;AAsCJ,SAAS,IAAI,SAAJ,EAAT;;AAEA,OAAO,OAAP,CAAe,YAAY;AACvB,aAAS,OAAT,CAAiB,KAAjB,CAAuB,EAAC,WAAW,IAAX,EAAxB,EADuB;CAAZ,CAAf;;AAIA,SAAS,GAAT,CAAa,MAAb,GAAsB,YAAY;AAC9B,WAAO,QAAQ,GAAR,CAAY,YAAZ,CAAP,CAD8B;CAAZ;;AAItB,SAAS,GAAT,CAAa,MAAb,CAAoB;AAChB;AAAiB,6BAAU,KAAV,EAAiB;AAC9B,kBAAM,cAAN,GAD8B;AAE9B,gBAAI,YAAY,EAAE,WAAF,EAAe,GAAf,EAAZ,CAF0B;AAG9B,gBAAI,YAAY,EAAE,WAAF,EAAe,GAAf,EAAZ,CAH0B;AAI9B,gBAAI,aAAa,EAAE,YAAF,EAAgB,GAAhB,EAAb,CAJ0B;AAK9B,gBAAI,mBAAmB,EAAE,kBAAF,EAAsB,GAAtB,EAAnB,CAL0B;AAM9B,gBAAI,UAAU,MAAV,KAAqB,CAArB,IAA0B,UAAU,MAAV,KAAqB,CAArB,EAAwB;AAClD,wBAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAS,EAAT,EAAa,OAAM,aAAN,EAAlC,EADkD;AAElD,uBAFkD;aAAtD;AAIA,gBAAI,cAAc,gBAAd,EAAgC;AAChC,wBAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAS,EAAT,EAAY,OAAM,WAAN,EAAjC,EADgC;AAEhC,uBAFgC;aAApC;AAIA,qBAAS,UAAT,CAAoB;AAChB,0BAAU,SAAV;AACA,0BAAU,SAAV;AACA,uBAAO,UAAP,EAHJ,EAII,UAAS,GAAT,EAAa;AACT,oBAAG,GAAH,EAAO;AACH,4BAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAQ,EAAR,EAAY,OAAM,IAAI,MAAJ,EAAvC,EADG;iBAAP,MAEK;AACD,4BAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAQ,MAAR,EAAgB,OAAM,EAAN,EAArC,EADC;iBAFL;aADJ,CAJJ,CAd8B;SAAjB;;;OAAjB;CADJ;;AA6BA,SAAS,KAAT,CAAe,MAAf,CAAsB;AAClB;AAAiB,6BAAU,KAAV,EAAiB;AAC9B,kBAAM,cAAN,GAD8B;AAE9B,gBAAI,YAAY,EAAE,WAAF,EAAe,GAAf,EAAZ,CAF0B;AAG9B,gBAAI,YAAY,EAAE,WAAF,EAAe,GAAf,EAAZ,CAH0B;AAI9B,gBAAI,UAAU,MAAV,KAAqB,CAArB,IAA0B,UAAU,MAAV,KAAqB,CAArB,EAAwB;AAClD,wBAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAQ,EAAR,EAAY,OAAO,YAAP,EAAjC,EADkD;AAElD,uBAFkD;aAAtD;AAIA,mBAAO,iBAAP,CAAyB,SAAzB,EAAoC,SAApC,EAA+C,UAAU,GAAV,EAAe;AAC1D,oBAAG,GAAH,EAAO;AACH,4BAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAQ,EAAR,EAAY,OAAM,SAAN,EAAjC,EADG;iBAAP,MAEK;AACD,2BAAO,QAAP,CAAgB,GAAhB,EADC;AAED,4BAAQ,GAAR,CAAY,MAAZ,EAAoB,EAAC,SAAS,MAAT,EAAiB,OAAM,EAAN,EAAtC,EAFC;iBAFL;aAD2C,CAA/C,CAR8B;SAAjB;;;OAAjB;CADJ,wG","file":"/app.js","sourcesContent":["\nTemplate.body.addContent((function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"nav\")), \"\\n    \", Spacebars.include(view.lookupTemplate(\"container\")), \"\\n    \", Spacebars.include(view.lookupTemplate(\"footer\")) ];\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"nav\");\nTemplate[\"nav\"] = new Template(\"Template.nav\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"navbar navbar-inverse navbar-fixed-top\"\n  }, \"\\n        \", HTML.DIV({\n    \"class\": \"navbar-inner\"\n  }, \"\\n            \", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n                \", HTML.Raw('<a href=\"\" class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".nav-collapse\">\\n                    <span class=\"icon-bar\"></span>\\n                    <span class=\"icon-bar\"></span>\\n                    <span class=\"icon-bar\"></span>\\n                </a>'), \"\\n                \", HTML.Raw('<a href=\"/\" class=\"brand\">新闻爆料</a>'), \"\\n                \", HTML.DIV({\n    \"class\": \"nav-collapse\"\n  }, \"\\n                    \", HTML.UL({\n    \"class\": \"nav\"\n  }, \"\\n                        \", HTML.LI({\n    \"class\": function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"active\"), \"index\"));\n    }\n  }, HTML.Raw('<a href=\"/\">首页</a>')), \"\\n                        \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ \"\\n                            \", HTML.LI(HTML.A({\n      href: \"/logout\"\n    }, \"登出\")), \"\\n                        \" ];\n  }, function() {\n    return [ \"\\n                            \", HTML.LI({\n      \"class\": function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"active\"), \"login\"));\n      }\n    }, HTML.A({\n      href: \"/login\"\n    }, \"登入\")), \"\\n                            \", HTML.LI({\n      \"class\": function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"active\"), \"reg\"));\n      }\n    }, HTML.A({\n      href: \"/reg\"\n    }, \"注册\")), \"\\n                        \" ];\n  }), \"\\n                    \"), \"\\n                \"), \"\\n            \"), \"\\n        \"), \"\\n    \");\n}));\n\nTemplate.__checkName(\"container\");\nTemplate[\"container\"] = new Template(\"Template.container\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"container\",\n    \"class\": \"container\"\n  }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"info\")), \"\\n        \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"currentUrl\"), \"index\"));\n  }, function() {\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"index\")), \"\\n        \" ];\n  }), \"\\n        \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"currentUrl\"), \"login\"));\n  }, function() {\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"login\")), \"\\n        \" ];\n  }), \"\\n        \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"currentUrl\"), \"reg\"));\n  }, function() {\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"reg\")), \"\\n        \" ];\n  }), \"\\n    \");\n}));\n\nTemplate.__checkName(\"footer\");\nTemplate[\"footer\"] = new Template(\"Template.footer\", (function() {\n  var view = this;\n  return HTML.Raw('<p class=\"muted text-center\">newsplatform 2016</p>');\n}));\n\nTemplate.__checkName(\"info\");\nTemplate[\"info\"] = new Template(\"Template.info\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"info\"), \"success\"));\n  }, function() {\n    return [ \"\\n        \", HTML.DIV({\n      \"class\": \"alert alert-success\"\n    }, Blaze.View(\"lookup:info.success\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"info\"), \"success\"));\n    })), \"\\n    \" ];\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"info\"), \"error\"));\n  }, function() {\n    return [ \"\\n        \", HTML.DIV({\n      \"class\": \"alert alert-error\"\n    }, Blaze.View(\"lookup:info.error\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"info\"), \"error\"));\n    })), \"\\n    \" ];\n  }) ];\n}));\n","\nTemplate.__checkName(\"index\");\nTemplate[\"index\"] = new Template(\"Template.index\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"hero-unit\">\\n        <h1>欢迎来到 newsplatform 新闻爆料平台</h1>\\n        <p>newsplatform 是一个基于meteor的毕业设计项目</p>\\n        <p>\\n            <a href=\"/login\" class=\"btn btn-primary btn-large\">登陆</a>\\n            <a href=\"/reg\" class=\"btn btn-large\">立即注册</a>\\n        </p>\\n    </div>\\n    <div class=\"row\">\\n        <div class=\"span4\">\\n            <h2>在很久很久以前</h2>\\n            <p>有一个无故事王国，那里住着许多无故事的居民。</p>\\n        </div>\\n        <div class=\"span4\">\\n            <h2>语录</h2>\\n            <p>毁灭人类的从来不是无知而是傲慢。<br>\\n            毁灭你，与你何干？<br>\\n            那天清晨落叶满地，树林里分出两条路，而我选择了人迹罕至的一条，从此决定了我一生的道路<br>\\n            你们是虫子！<br>\\n            一切终将逝去，只有死神永生！<br>\\n            没有甲铁城看的大家不是只有去死了吗！<br>\\n            出师未捷身先死，妮可妮可妮可妮！</p>\\n        </div>\\n        <div class=\"span4\">\\n            <h3>一段话</h3>\\n            <p>“不论你是谁，不论你做什么，当你渴望得到某种东西时，最终一定能够得到，因为这愿望来自宇宙的灵魂。” “当你想要某种东西时，整个宇宙会合力助你实现愿望。” “人们很早就学会了生活的道理，也许正因为如此，他们才会早早就放弃了它们。世界就是如此。” 实际上，每天都一成不变，是因为人们已经失去了对美好事物的敏锐感觉。然而，只要有明媚的阳光，人们的生活中就会出现美好的事物。 “事情往往如此。...</p>\\n        </div>\\n    </div>');\n}));\n","\nTemplate.__checkName(\"login\");\nTemplate[\"login\"] = new Template(\"Template.login\", (function() {\n  var view = this;\n  return HTML.Raw('<form action=\"\" class=\"form-horizontal\">\\n        <fieldset>\\n            <legend>用户登入</legend>\\n            <div class=\"control-group\">\\n                <label for=\"username\" class=\"control-label\">用户名</label>\\n                <div class=\"controls\">\\n                    <input type=\"text\" id=\"username\" class=\"input-xlarge\" name=\"username\">\\n                </div>\\n            </div>\\n            <div class=\"control-group\">\\n                <label for=\"password\" class=\"control-label\">密码</label>\\n                <div class=\"controls\">\\n                    <input type=\"password\" name=\"password\" class=\"input-xlarge\" id=\"password\">\\n                </div>\\n            </div>\\n            <div class=\"form-actions\">\\n                <button id=\"submit\" class=\"btn btn-primary\">登入</button>\\n            </div>\\n        </fieldset>\\n    </form>');\n}));\n","\nTemplate.__checkName(\"reg\");\nTemplate[\"reg\"] = new Template(\"Template.reg\", (function() {\n  var view = this;\n  return HTML.FORM({\n    action: \"\",\n    \"class\": \"form-horizontal\"\n  }, \"\\n        \", HTML.FIELDSET(\"\\n            \", HTML.getTag(\"lengend\")(\"用户注册\"), \"\\n            \", HTML.Raw('<div class=\"control-group\">\\n                <label for=\"username\" class=\"control-label\">用户名</label>\\n                <div class=\"controls\">\\n                    <input type=\"text\" id=\"username\" class=\"input-xlarge\" name=\"username\">\\n                </div>\\n            </div>'), \"\\n            \", HTML.Raw('<div class=\"control-group\">\\n                <label for=\"useremail\" class=\"control-label\">邮箱</label>\\n                <div class=\"controls\">\\n                    <input type=\"text\" id=\"useremail\" class=\"input-xlarge\" name=\"useremail\">\\n                </div>\\n            </div>'), \"\\n            \", HTML.Raw('<div class=\"control-group\">\\n                <label for=\"password\" class=\"control-label\">密码</label>\\n                <div class=\"controls\">\\n                    <input type=\"password\" class=\"input-xlarge\" id=\"password\" name=\"password\">\\n                </div>\\n            </div>'), \"\\n            \", HTML.Raw('<div class=\"control-group\">\\n                <label for=\"password-repeat\" class=\"control-label\">重复输入密码</label>\\n                <div class=\"controls\">\\n                    <input type=\"password\" name=\"password-repeat\" class=\"input-xlarge\" id=\"password-repeat\">\\n                </div>\\n            </div>'), \"\\n            \", HTML.Raw('<div class=\"form-actions\">\\n                <button id=\"submit\" class=\"btn btn-primary\">注册</button>\\n            </div>'), \"\\n        \"), \"\\n    \");\n}));\n","Session.setDefault(\"currentUrl\", {index: \"active\", login: \"\", reg: \"\"});\r\nSession.setDefault(\"info\", {success:\"\",error:\"\"});\r\n\r\nTemplate.info.info = function () {\r\n    return Session.get(\"info\");\r\n}\r\n\r\nTemplate.container.currentUrl = function() {\r\n    return Session.get(\"currentUrl\");\r\n}\r\n\r\nvar urlRouter = Backbone.Router.extend({\r\n    routes: {\r\n        \"\": \"index\",\r\n        \"login\": \"login\",\r\n        \"reg\": \"reg\",\r\n        \"logout\": \"logout\"\r\n    },\r\n    index: function () {\r\n        Session.set(\"currentUrl\", {index: \"active\", login: \"\", reg: \"\"});\r\n    },\r\n    login: function () {\r\n        if(Meteor.userId()){\r\n            this.navigate(\"/\",true);\r\n            Session.set(\"info\", {success:\"\", error: \"用户已在线！\"});\r\n        }\r\n        Session.set(\"currentUrl\", {index: \"\", login:\"active\", reg: \"\"});\r\n    },\r\n    reg: function () {\r\n        if(Meteor.userId()){\r\n            this.navigate(\"/\",true);\r\n            Session.set(\"info\", {success:\"\", error: \"用户已在线！\"});\r\n        }\r\n        Session.set(\"currentUrl\", {index: \"\", login: \"\", reg: \"active\"});\r\n    },\r\n    logout: function () {\r\n        if(Meteor.userId()){\r\n            Meteor.logout();\r\n            this.navigate(\"/\",true);\r\n            Session.set(\"info\", {success:\"登出成功\", error: \"\"});\r\n        }else{\r\n            this.navigate(\"/\",true);\r\n            Session.set(\"info\", {success:\"\", error: \"用户不在线！\"});\r\n        }\r\n    },\r\n    redirect: function(url){\r\n        this.navigate(url, true);\r\n    }\r\n});\r\nRouter = new urlRouter;\r\n\r\nMeteor.startup(function () {\r\n    Backbone.history.start({pushState: true});\r\n});\r\n\r\nTemplate.nav.active = function () {\r\n    return Session.get(\"currentUrl\");\r\n};\r\n\r\nTemplate.reg.events({\r\n    'click #submit': function (event) {\r\n        event.preventDefault();\r\n        var $username = $(\"#username\").val();\r\n        var $password = $(\"#password\").val();\r\n        var $useremail = $(\"#useremail\").val();\r\n        var $password_repeat = $(\"#password-repeat\").val();\r\n        if ($password.length === 0 || $username.length === 0) {\r\n            Session.set(\"info\", {success: \"\", error:\"用户名或者密码不能为空\"});\r\n            return;\r\n        }\r\n        if ($password !== $password_repeat) {\r\n            Session.set(\"info\", {success: \"\",error:\"两次输入密码不一致\"});\r\n            return;\r\n        }\r\n        Accounts.createUser({\r\n            username: $username,\r\n            password: $password,\r\n            email: $useremail},\r\n            function(err){\r\n                if(err){\r\n                    Session.set(\"info\", {success:\"\", error:err.reason});\r\n                }else{\r\n                    Session.set(\"info\", {success:\"注册成功\", error:\"\"});\r\n                }\r\n            });\r\n    }\r\n});\r\n\r\nTemplate.login.events({\r\n    'click #submit': function (event) {\r\n        event.preventDefault();\r\n        var $username = $(\"#username\").val();\r\n        var $password = $(\"#password\").val();\r\n        if ($password.length === 0 || $username.length === 0) {\r\n            Session.set(\"info\", {success:\"\", error: \"用户名或密码不能为空\"});\r\n            return;\r\n        } \r\n        Meteor.loginWithPassword($username, $password, function (err) {\r\n            if(err){\r\n                Session.set(\"info\", {success:\"\", error:\"登陆失败！！！\"});\r\n            }else{\r\n                Router.redirect(\"/\");\r\n                Session.set(\"info\", {success: \"登陆成功\", error:\"\"});\r\n            }\r\n        });\r\n    }\r\n});"]}}]